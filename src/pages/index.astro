---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import ProductCard from '../components/ProductCard.astro';
import AboutSection from '../components/AboutSection.astro';
import ConfigService from '../services/configService';

const { products, config } = await ConfigService.fetchData();
---

<Layout title={config?.site_name || "HAKU 1984"} config={config}>
  <Header config={config} />
  
  <main>
    {/* Hero 是滿版的，不放在 container 內 */}
    <Hero config={config} />

    {/* 商品列表需要置中 */}
    <section class="container products-section">
      <div class="section-header">
        <h2>LATEST DROPS</h2>
        <a href="/shop" class="view-all">VIEW ALL →</a>
      </div>
      <div class="product-grid">
        {products.slice(0, 8).map(product => (
          <ProductCard product={product} />
        ))}
      </div>
    </section>

    <AboutSection config={config} />
  </main>

  <Footer config={config} />
</Layout>

<style>
  .products-section { padding: 80px 20px; }
  .section-header { 
    display: flex; justify-content: space-between; align-items: flex-end; 
    margin-bottom: 40px; border-bottom: 2px solid var(--haku-ink); padding-bottom: 10px;
  }
  .section-header h2 { font-family: 'Montserrat', sans-serif; font-weight: 900; margin: 0; font-size: 1.5rem; }
  .view-all { text-decoration: none; color: var(--haku-ink); font-weight: 700; font-size: 0.9rem; }
  
  .product-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
  }
  @media (min-width: 1024px) {
    .product-grid { grid-template-columns: repeat(4, 1fr); gap: 30px; }
  }
</style>
