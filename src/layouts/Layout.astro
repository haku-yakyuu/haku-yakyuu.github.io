---
import { getHakuData } from '../utils/api';

const { products, config } = await getHakuData();
const categories = [...new Set(products.map(p => p.category))];
const siteTitle = config.site_title || "HAKU YAKYUU";
---

<aside class="sidebar">
    <div class="brand">
        <h1>{siteTitle}</h1>
    </div>
    
    <nav>
        <a href="/" class="nav-item">ALL PRODUCTS</a>
        <div class="divider"></div>
        {categories.map(cat => (
            <a href={`/category/${cat}`} class="nav-item">{cat}</a>
        ))}
    </nav>
    
    {config.announcement && 
        <div class="announcement">
            {config.announcement}
        </div>
    }
</aside>

<style>
    .sidebar {
        width: var(--sidebar-width);
        background: var(--haku-paper); /* V5 紙色 */
        border-right: 1px solid rgba(62, 39, 35, 0.1);
        height: 100vh;
        position: fixed;
        left: 0;
        top: 0;
        padding: 30px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        z-index: 10;
        color: var(--haku-ink); /* V5 墨色 */
    }
    .brand h1 {
        margin: 0 0 40px 0;
        font-size: 24px;
        font-weight: 900;
        letter-spacing: -1px;
        border-bottom: 4px solid var(--haku-ink);
        padding-bottom: 10px;
        line-height: 1.1;
    }
    .nav-item {
        display: block;
        padding: 12px 0;
        color: var(--haku-ink);
        opacity: 0.7;
        font-weight: 500;
        transition: all 0.2s;
        font-size: 1.1rem;
    }
    .nav-item:hover { opacity: 1; padding-left: 5px; font-weight: 700; }
    .divider { height: 1px; background: rgba(62, 39, 35, 0.2); margin: 15px 0; }
    
    .announcement {
        margin-top: auto;
        background: var(--haku-ink);
        color: var(--haku-paper);
        padding: 15px;
        font-size: 0.9rem;
        text-align: center;
        border-radius: 2px;
    }
</style>
